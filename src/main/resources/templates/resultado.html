<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultado del Examen</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6 text-center">
                <div class="card shadow border-0 p-4">
                    <h2 class="text-primary mb-4">¡Examen Finalizado!</h2>
                    <p class="lead">Hola <strong th:text="${alumno.nombre}"></strong>,</p>
                    <p>Has completado satisfactoriamente tu evaluación.</p>
                    
					<div class="my-4 py-3 bg-light rounded shadow-sm">
					    <h4 class="mb-0">Tu Calificación:</h4>
					    
					    <span class="display-3 fw-bold" 
					          th:classappend="${calificacion < 6.0} ? 'text-danger' : (${calificacion < 8.0} ? 'text-warning' : 'text-success')"
					          th:text="${#numbers.formatDecimal(calificacion, 1, 1)}">
					    </span>
						
						<h5 class="mt-2" th:classappend="${calificacion < 6.0} ? 'text-danger' : (${calificacion < 8.0} ? 'text-warning' : 'text-success')">
						    <span th:if="${calificacion < 6.0}">Necesitas estudiar más, ¡tú puedes!</span>
						    <span th:if="${calificacion >= 6.0 && calificacion < 8.0}">¡Buen esfuerzo! Puedes mejorar aún más.</span>
						    <span th:if="${calificacion >= 8.0}">¡Excelente trabajo! Felicidades.</span>
						</h5>
					</div>

                    <p>Aciertos: <span th:text="${aciertos}"></span> de 25</p>
					<div th:if="${error}" class="alert alert-warning mb-4 text-center">
					    <span th:text="${error}"></span>
					</div>
                    <a href="/" class="btn btn-outline-primary mt-3">Salir al Inicio</a>
                </div>
            </div>
        </div>
    </div>
	<script>
	    // 1. Limpiar por completo el sessionStorage por si algo quedó
	    sessionStorage.clear();

	    // 2. Manipular el historial para evitar que regresen al examen
	    history.pushState(null, null, location.href);
	    window.onpopstate = function () {
	        // Si intentan ir atrás, los empujamos de nuevo hacia adelante
	        history.go(1);
	    };

	    // 3. Opcional: Bloquear clic derecho y F12 también aquí si quieres consistencia
	    document.addEventListener('contextmenu', event => event.preventDefault());
	</script>
</body>
</html>